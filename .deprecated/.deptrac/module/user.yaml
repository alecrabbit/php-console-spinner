###  Module - User
parameters:
  UserGatewayLayerDir: src/Gateway/UI/User
  UserGatewayContractLayerDir: src/Gateway/UI/User/Contract
  UserControllerContractLayerDir: src/Module/User/Infrastructure/Controller/Contract
  UserApiLayerDir: src/Module/User/Api
  UserDomainLayerDir: src/Module/User/Domain
  UserApplicationLayerDir: src/Module/User/Application
  UserInfrastructureLayerDir: src/Module/User/Infrastructure

  layers:
    - name: LUserGateway
      collectors:
        - type: bool
          must:
            - type: directory
              regex: '%UserGatewayLayerDir%'
          must_not:
            - type: directory
              regex: '%UserGatewayContractLayerDir%'
    - name: LUserGatewayContract
      collectors:
        - type: bool
          must:
            - type: directory
              regex: '%UserGatewayContractLayerDir%'
    - name: LUserControllerContract
      collectors:
        - type: bool
          must:
            - type: directory
              regex: '%UserControllerContractLayerDir%'
    - name: LUserApi
      collectors:
        - type: bool
          must:
            - type: directory
              regex: '%UserApiLayerDir%'
    - name: LUserInfrastructure
      collectors:
        - type: bool
          must:
            - type: directory
              regex: '%UserInfrastructureLayerDir%'
          must_not:
            - type: directory
              regex: '%UserControllerContractLayerDir%'
            - type: className
              regex: '.*Adapter\\Module.*'
    - name: LUserApplication
      collectors:
        - type: bool
          must:
            - type: directory
              regex: '%UserApplicationLayerDir%'
    - name: LUserDomain
      collectors:
        - type: bool
          must:
            - type: directory
              regex: '%UserDomainLayerDir%'
    - name: LUserModuleAdapters
      collectors:
        - type: bool
          must:
            - type: directory
              regex: '%UserInfrastructureLayerDir%'
            - type: className
              regex: '.*Adapter\\Module.*'


  ruleset:
    LUserGateway:
      - LUserApi
      - +LUserGatewayContract
    LUserGatewayContract:
      - +LUserControllerContract
    LUserControllerContract:
      - LUserApi
      - +LUserInfrastructure
    LUserApi:
      - +SharedApplicationLayer
      - LUserApplication
    LUserInfrastructure:
      - +SharedInfrastructureLayer
      - +LUserApplication
    LUserApplication:
      - +SharedApplicationLayer
      - LUserDomain
    LUserDomain:
      - +SharedDomainLayer
    LUserModuleAdapters:
      - +LUserInfrastructure
